# E-commerce API

## Overview
This repository contains a Flask-based REST API for an e-commerce platform. The service exposes JWT-enabled authentication endpoints together with resource blueprints for users, products, categories, addresses, orders, order items, and payments. SQLAlchemy models define the relational schema and Flasgger provides interactive API documentation.

### Implemented Capabilities
- User registration and login with bcrypt-hashed passwords and short-lived JWT tokens.
- List/detail endpoints plus create operations for products, categories, addresses, orders, order items, payments, and users.
- Consistent JSON responses via `app.utils.api_helpers.APIResponse`.
- Automatic Swagger UI hosted at `/docs/` when the app is running.
- Database seeding script that bootstraps realistic development data.

## Tech Stack
- Python 3.10+ (Flask 3.0)
- Flask-SQLAlchemy for ORM access to MySQL or SQLite
- PyMySQL database driver (required for MySQL URLs)
- PyJWT and bcrypt for authentication
- Flasgger for OpenAPI documentation
- Makefile targets for common developer workflows

## Project Layout
```
.
├── application.py        # WSGI entry point (runs on port 8000)
├── app/
│   ├── __init__.py       # Application factory and blueprint registration
│   ├── api/              # Blueprint modules for each resource
│   ├── config.py         # Environment-driven configuration values
│   ├── extensions.py     # Initialized Flask extensions
│   ├── models/           # SQLAlchemy models and enums
│   └── utils/api_helpers.py
├── requirements.txt      # Python dependencies
├── schema.sql            # Optional MySQL schema bootstrap
├── seed_db.py            # Database seeding script
├── Makefile              # Convenience commands
└── LICENSE               # MIT License
```

## Getting Started
### 1. Install prerequisites
- Python 3.10 or later
- MySQL 8.x (if using MySQL instead of SQLite)
- `pip` and optional tools like `make`

### 2. Clone and create a virtual environment
```bash
git clone <repository-url>
cd Ecommerce
python3 -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate
```

### 3. Install dependencies
```bash
pip install -r requirements.txt
```

### 4. Configure environment variables
Copy or create a `.env` and ensure at minimum:
```env
DATABASE_URL=mysql+pymysql://<user>:<password>@localhost/ecommerce_db
SECRET_KEY=local-dev-secret
FLASK_ENV=development
FLASK_DEBUG=True
```
SQLite is supported for quick starts:
```env
DATABASE_URL=sqlite:///ecommerce.db
```
`Config.SQLALCHEMY_DATABASE_URI` pulls directly from `DATABASE_URL`, so the application will fail to boot if it is missing.

### 5. Prepare the database
Pick one of the following options:
- **SQLAlchemy schema**: run the seeding script (described below). It will call `db.create_all()` before inserting data.
- **MySQL schema script**: execute `mysql -u <user> -p < schema.sql` to build tables manually.

### 6. Seed sample data (optional but recommended)
```bash
make seed  # or python seed_db.py
```
The seeder recreates tables, clears existing rows, and inserts sample users, products, orders, and payments. Do not run it against production data.

### 7. Run the development server
```bash
make run           # wraps: python application.py
```
The app listens on `http://localhost:8000`. API routes are namespaced under `/api`, for example:
```bash
curl http://localhost:8000/api/products
```

### 8. Explore interactive documentation
Visit `http://localhost:8000/docs/` for the Swagger UI generated by Flasgger. Each endpoint includes request/response descriptions sourced from inline docstrings.

## Data Model Overview
- `User`: customer/admin roles with bcrypt password support and relationships to addresses and orders.
- `Address`: shipping/billing information linked to users.
- `Category`: product organization hierarchy.
- `Product`: catalog items with pricing, inventory, and SKU uniqueness constraints.
- `Order` & `OrderItem`: capture carts, line items, and order status transitions.
- `Payment`: records payment attempts and their statuses.

`schema.sql` and the SQLAlchemy models stay in sync; update both when changing the schema.

## Development Notes
- Endpoints currently cover read and create operations. Update/delete functionality, pagination, filtering, and authorization checks are not yet implemented.
- JWT issuance happens on login/register, but protecting other routes with token verification is pending.
- Input validation is minimal; use libraries such as Marshmallow or Pydantic for production-grade validation.
- There are no automated tests yet; add unit and integration coverage before shipping to production.

## Useful Commands
- `make run` – start the development server on port 8000.
- `make seed` – rebuild tables and load development fixtures.
- `python -m flask shell` – open an interactive shell (set `FLASK_APP=application.py` first).

## License
Distributed under the MIT License. See `LICENSE` for details.
